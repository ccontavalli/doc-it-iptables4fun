<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.69">
 <TITLE>IPtables for Fun -- Implementare un firewall in linux: Modifiche on the fly - iptables da riga di comando</TITLE>
 <LINK HREF="iptables4fun-34.html" REL=next>
 <LINK HREF="iptables4fun-32.html" REL=previous>
 <LINK HREF="iptables4fun.html#toc11" REL=contents>
</HEAD>
<BODY>
<A HREF="iptables4fun-34.html">Avanti</A>
<A HREF="iptables4fun-32.html">Indietro</A>
<A HREF="iptables4fun.html#toc11">Indice</A>
<HR>
<H2><A NAME="s11">11.</A> <A HREF="iptables4fun.html#toc11">Modifiche on the fly - iptables da riga di comando</A></H2>

<P>Sebbene sia veramente poco piacevole, &egrave; possibile utilizzare 
iptables direttamente da riga di comando. </P>
<P>Nonostante questo, alcune di queste funzioni possono  risultare molto utili 
in fase di testing. Ad esempio, dovendo
fare delle misure di banda pu&ograve; essere utile consentire temporaneamente
solo il traffico tra determinate macchine, e non  &egrave; il caso di 
perdere tempo a modificare file di configurazione o script dalla
provata affidabilit&agrave;. Ok, iniziamo quindi col vedere le 
regole attive sul kernel da me correntemente utilizzate, col
comando ``iptables -nL'', dove ``n'' dice di non risolvere i nomi (passando
da indirizzi ip a nomi di domini) e ``L'' di ``listare'' o elencare (in italiano)
tutte le regole:
<BLOCKQUOTE><CODE>
<PRE>
Chain INPUT (policy DROP)
target     prot opt source               destination         
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0          
ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0          tcp dpt:22 
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0          state RELATED,ESTABLISHED 
REJECT     tcp  --  0.0.0.0/0            0.0.0.0/0          reject-with tcp-reset 

Chain FORWARD (policy DROP)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
</PRE>
</CODE></BLOCKQUOTE>

-n lo uso principalmente perch&eacute; altrimenti ci metterebbe molto tempo
a generare l'output (tentando di connettersi al database), per il resto,
credo che l'output in se stesso credo che risulti abbastanza autoesplicativo...
un problema di ``iptables -nL'' (rispetto ad usare un file di configurazione) 
&egrave; che molti dettagli non vengono mostrati e comunque la leggibilit&agrave;
&egrave; molto minore.</P>
<P>Per avere pi&ugrave; dettagli, comunque, &egrave; possibile utilizzare l'opzione ``-v'' o ``-vv'',
con un comando simile a ``iptables -v -nL'':
<BLOCKQUOTE><CODE>
<PRE>
Chain INPUT (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
41512   83M ACCEPT     all  --  lo     *       0.0.0.0/0            0.0.0.0/0          
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0          tcp dpt:22 
    0     0 ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0          state RELATED,ESTABLISHED 
    0     0 REJECT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0          reject-with tcp-reset 

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 41513 packets, 83M bytes)
 pkts bytes target     prot opt in     out     source               destination         
</PRE>
</CODE></BLOCKQUOTE>

ancora, l'output &egrave; abbastanza autoesplicativo. Se state leggendo
il pdf notate per&ograve; come le righe vengono troncate. Immaginate su
un terminale con le classiche 80 colonne cosa verrebbe fuori.</P>
<P>Se siete interessati ad un'unica catena, potete specificarne il 
nome dopo il ``-nL''. Con qualcosa di simile a ``iptables -vv -nL INPUT''
vedreste solo la catena di ``INPUT'' ed un dump delle informazioni del kernel. 
Come altre
opzioni generiche, potete utilizzare ``-x'', che mostrer&agrave;
i valori esatti dei contatori, mentre ``-Z'' li azzerer&agrave;, oppure ``-t nometabella''
per visualizzare altre tabelle.</P>

<HR>
<A HREF="iptables4fun-34.html">Avanti</A>
<A HREF="iptables4fun-32.html">Indietro</A>
<A HREF="iptables4fun.html#toc11">Indice</A>
</BODY>
</HTML>
